{"title":"Xaringan Drilldown","markdown":{"yaml":{"title":"Xaringan Drilldown","author":"Joey Trampush","date":"2021-08-26","categories":["xaringan"],"tags":["R"],"subtitle":"R + neuropsychological data","summary":"Where does the summary show up?","authors":["Joey Trampush"],"lastmod":"2021-08-26","featured":"no","draft":"no","slug":"xaringan-drilldown","output":{"xaringan::moon_reader":{"css":"xaringan-themer.css","nature":{"slideNumberFormat":"%current%","highlightStyle":"github","highlightLines":"yes","ratio":"16:9","countIncrementalSlides":"yes","includePresenterNotes":"yes"},"self_contained":"yes"},"blogdown::html_page":{"toc":"no","fig_width":7,"fig_asp":0.618,"fig_retina":2,"dev":"svg"}},"rmd_hash":"ad12fe1c1b68566d"},"headingText":"Import CSV files","containsRefs":false,"markdown":"\n\n\n```{r not-setup, include=FALSE}\noptions(htmltools.dir.version = FALSE)\nxaringanExtra::use_panelset() # So we can add some slides with fancy panelsets!\n```\n\n```{r setup, include=FALSE}\nlibrary(rmarkdown)\nlibrary(revealjs)\nlibrary(xaringan)\nlibrary(xaringanExtra)\nlibrary(xaringanBuilder)\nlibrary(xaringanthemer)\nlibrary(blogdown)\nlibrary(dataui)\nlibrary(reactable)\nlibrary(tidyverse)\nlibrary(highcharter)\nlibrary(htmlwidgets)\nlibrary(widgetframe)\nlibrary(crosstalk)\nlibrary(manipulateWidget)\nlibrary(tibble)\noptions(htmltools.dir.version = FALSE)\nknitr::opts_chunk$set(\n  fig.width = 9,\n  fig.height = 3.5,\n  fig.retina = 3,\n  out.width = \"100%\",\n  cache = FALSE,\n  echo = FALSE,\n  message = FALSE,\n  warning = FALSE,\n  fig.show = TRUE,\n  hiline = TRUE\n)\n```\n\n```{r xaringan-broadcast, echo=FALSE}\nxaringanExtra::use_broadcast()\n```\n\n```{r xaringan-themer}\nlibrary(xaringanthemer)\nstyle_mono_accent(\n  base_color = \"#690f0d\", # bright red\n  inverse_background_color = \"#002B36\", # dark dark blue\n  inverse_header_color = \"#31b09e\", # light aqua green\n  inverse_text_color = \"#FFFFFF\", # white\n  title_slide_background_color = \"var(--base)\",\n  text_font_google = google_font(\"Sen\"),\n  header_font_google = google_font(\"NATS\")\n)\n```\n\n\n---\n\n\n# Distribution of Scores: Population-level Interpretation\n\n```{r gauss-plot1, fig.cap='Statistical classification of neuropsychological test scores in the general population.', fig.width=4, fig.height=4, out.width = \"50%\"}\nknitr::include_graphics(\"plot_narrow.png\", auto_pdf = TRUE)\n```\n\n---\n\n# Neuropsych Drilldown: z-Scores (M = 0, SD = 1)\n\n```{r}\nneurocog <- read_csv(\"neurocog.csv\")\n```\n\n```{r}\n# for zscores\nncogz <- neurocog %>%\n  group_by(domain) %>%\n  summarize(zMean = mean(z))\n\nncogz <- arrange(ncogz, desc(zMean))\n\n## Level 1\nncogL1statusz <- tibble(\n  name = ncogz$domain,\n  y = ncogz$zMean,\n  drilldown = tolower(name)\n)\nncogL1statusz$y <- round(ncogL1statusz$y, 1)\n\n## Level 2\nncogL2drillz <- lapply(unique(neurocog$domain), function(x_level) {\n  ncog2z <- subset(neurocog, neurocog$domain %in% x_level)\n  # ncog2z <- neurocog2[neurocog2$domain == x_level,]\n  ncog2z <- ncog2z %>%\n    group_by(subdomain) %>%\n    summarize(zMean = mean(z))\n  ncog2z <- arrange(ncog2z, desc(zMean)) ### CHECK\n  ncogL2zstatus <- tibble(name = ncog2z$subdomain, y = ncog2z$zMean, drilldown = tolower(paste(x_level, name, sep = \"_\")))\n  list(id = tolower(x_level), type = \"column\", data = list_parse(ncogL2zstatus))\n})\n\n## Level 3\nncogL3drillz <- lapply(unique(neurocog$domain), function(x_level) {\n  ncog2z <- subset(neurocog, neurocog$domain %in% x_level)\n  # ncog2 <- neurocog[neurocog$domain == x_level,]\n  lapply(unique(ncog2z$subdomain), function(y_level) {\n    ncog3z <- subset(ncog2z, ncog2z$subdomain %in% y_level)\n    # ncog3 <- ncog2[ncog2$subdomain == y_level,]\n    ncog3z <- ncog3z %>%\n      group_by(narrow) %>%\n      summarize(zMean = mean(z))\n    ncog3z <- arrange(ncog3z, desc(zMean))\n    ncogL3zstatus <- tibble(name = ncog3z$narrow, y = ncog3z$zMean, drilldown = tolower(paste(x_level, y_level, name, sep = \"_\")))\n    list(id = tolower(paste(x_level, y_level, sep = \"_\")), type = \"column\", data = list_parse(ncogL3zstatus))\n  })\n}) %>% unlist(recursive = FALSE)\n\n## Level 4\nncogL4drillz <- lapply(unique(neurocog$domain), function(x_level) {\n  ncog2z <- subset(neurocog, neurocog$domain %in% x_level)\n  # ncog2 <- neurocog[neurocog$domain == x_level,]\n  lapply(unique(ncog2z$subdomain), function(y_level) {\n    ncog3z <- subset(ncog2z, ncog2z$subdomain %in% y_level)\n    # ncog3 <- ncog2[ncog2$subdomain == y_level,]\n    lapply(unique(ncog3z$narrow), function(z_level) {\n      ncog4z <- subset(ncog3z, ncog3z$narrow %in% z_level)\n      # ncog4 <- ncog3[ncog3$narrow == z_level,]\n      ncog4z <- ncog4z %>%\n        group_by(scale) %>%\n        summarize(zMean = mean(z))\n      ncog4z <- arrange(ncog4z, desc(zMean))\n      ncogL4zstatus <- tibble(name = ncog4z$scale, y = ncog4z$zMean)\n      list(id = tolower(paste(x_level, y_level, z_level, sep = \"_\")), type = \"column\", data = list_parse2(ncogL4zstatus))\n    })\n  }) %>% unlist(recursive = FALSE)\n}) %>% unlist(recursive = FALSE)\n```\n\n```{r drillz, fig.cap='Drilldown Neuropsych Testing zScores', out.width = \"100%\"}\n## for Tooltip\n\nncogL1statusz <- ncogL1statusz %>%\n  dplyr::mutate(\n    rangez = case_when(\n      y >= 2.0 ~ \"Exceptionally High\",\n      y %in% 1.3:1.9 ~ \"Above Average\",\n      y %in% 0.7:1.2 ~ \"High-Average\",\n      y %in% -0.7:0.6 ~ \"Average\",\n      y %in% -1.3:-0.6 ~ \"Low-Average\",\n      y %in% -2.0:-1.4 ~ \"Below Average\",\n      y < -2.0 ~ \"Exceptionally Low\"\n    )\n  )\n\nx <- c(\"Name\", \"Score\", \"Range\")\ny <- c(\"{point.name}\", \"{point.y}\", \"{point.rangez}\")\ntt <- tooltip_table(x, y)\n```\n\n```{r drillz-plot}\nframeWidget(\n  highchart() %>%\n    hc_title(\n      text = \"biggie\",\n      style = list(fontSize = \"15px\")\n    ) %>%\n    hc_add_series(\n      ncogL1statusz,\n      type = \"bar\",\n      name = \"Neuropsychological Test Scores\",\n      hcaes(\n        x = name,\n        y = y,\n        color = c(\n          \"#058DC7\",\n          \"#50B432\",\n          \"#DDDF00\",\n          \"#24CBE5\",\n          \"#64E572\",\n          \"#FF9655\"\n        )\n      )\n    ) %>%\n    hc_xAxis(\n      type = \"category\",\n      title = list(text = \"Domain\"),\n      categories = .$name\n    ) %>%\n    hc_yAxis(\n      title = list(text = \"z-score\"),\n      labels = list(format = \"{value}\")\n    ) %>%\n    hc_tooltip(\n      pointFormat = tt,\n      useHTML = TRUE,\n      valueDecimals = 0\n    ) %>%\n    hc_plotOptions(\n      series = list(\n        colorByPoint = TRUE,\n        allowPointSelect = TRUE,\n        dataLabels = TRUE\n      )\n    ) %>%\n    hc_drilldown(\n      allowPointDrilldown = TRUE,\n      series = c(ncogL2drillz, ncogL3drillz, ncogL4drillz)\n    )\n)\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":{"xaringan::moon_reader":{"css":"xaringan-themer.css","nature":{"slideNumberFormat":"%current%","highlightStyle":"github","highlightLines":"yes","ratio":"16:9","countIncrementalSlides":"yes","includePresenterNotes":"yes"},"self_contained":"yes"},"blogdown::html_page":{"toc":"no","fig_width":7,"fig_asp":0.618,"fig_retina":2,"dev":"svg"}},"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../../styles.css"],"toc":true,"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.215","theme":"cosmo","title":"Xaringan Drilldown","author":"Joey Trampush","date":"2021-08-26","categories":["xaringan"],"tags":["R"],"subtitle":"R + neuropsychological data","summary":"Where does the summary show up?","authors":["Joey Trampush"],"lastmod":"2021-08-26","featured":"no","draft":"no","slug":"xaringan-drilldown","rmd_hash":"ad12fe1c1b68566d"},"extensions":{"book":{"multiFile":true}}}}}